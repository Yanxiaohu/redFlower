(this.webpackJsonpperson=this.webpackJsonpperson||[]).push([[9],{103:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a="https://demo.don.red/user-center/api"},108:function(e,t,r){"use strict";var a=r(19),n=r(140),s=r.n(n),c={response:[{name:"formatResponse",success:function(e){return e.data}},{name:"handleError",success:function(e){return 7004===e.code&&(window.location.href="/"),e}}],request:[{name:"addHttpRequestHeader",success:function(e){return e.headers.Authorization="Bearer ".concat(window.localStorage.getItem("person-app-token")),e},fail:function(e){return console.error(e),Promise.reject(e)}}]};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type;c[r].forEach((function(t){var a=t.success,n=t.fail;e.interceptors[r].use(a,n)}))}function o(e){var t,r=s.a.create();return i(t=r,{type:"response"}),i(t,{type:"request"}),r}t.a={get:function(e,t){return o()(Object(a.a)({url:e,method:"get"},t))},post:function(e,t){return o()(Object(a.a)({url:e,method:"post"},t))}}},142:function(e,t,r){"use strict";r(129);var a=r(119),n=(r(94),r(96)),s=(r(90),r(92)),c=(r(93),r(97)),i=(r(100),r(102)),o=r(19),l=(r(136),r(149)),u=r(98),j=r(197),d=r(0),p=(r(143),r(3));t.a=function(e){var t=e.name,r=e.onClick,b=e.rules,f=Object(j.a)(e,["name","onClick","rules"]),m=Object(d.useState)(!1),h=Object(u.a)(m,2),O=h[0],x=h[1],g=Object(d.useState)(10),v=Object(u.a)(g,2),w=v[0],y=v[1];if(Object(d.useEffect)((function(){var e=0;return O&&(e=setInterval((function(){y((function(t){return t<=1?(x(!1),clearInterval(e),10):t-1}))}),1e3)),function(){return clearInterval(e)}}),[O]),"captcha"===t)return Object(p.jsx)(n.a.Item,{name:t,rules:b,children:Object(p.jsxs)(s.a,{children:[Object(p.jsx)(i.a,{span:15,children:Object(p.jsx)(l.a,Object(o.a)({},f))}),Object(p.jsx)(i.a,{span:1}),Object(p.jsx)(i.a,{span:8,children:Object(p.jsx)(c.a,{style:{width:"100%"},disabled:O,type:"primary",size:"large",onClick:function(){r(),x(!0)},children:O?"".concat(w,"\u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})})]})});if("mobile"===t){var k=Object(p.jsx)(n.a.Item,{name:"prefix",noStyle:!0,children:Object(p.jsxs)(a.a,{style:{width:70},children:[Object(p.jsx)(a.a.Option,{value:"86",children:"+86"}),Object(p.jsx)(a.a.Option,{value:"87",children:"+87"})]})});return Object(p.jsx)(n.a.Item,{name:t,rules:b,children:Object(p.jsx)(l.a,Object(o.a)({addonBefore:k},f))})}return Object(p.jsx)(n.a.Item,{name:t,rules:b,children:Object(p.jsx)(l.a,Object(o.a)({},f))})}},143:function(e,t,r){},146:function(e,t,r){"use strict";r(94);var a=r(96),n=(r(93),r(97)),s=(r(0),r(147)),c=r.n(s),i=r(3);t.a=function(e){var t=e.children,r=e.loading;return Object(i.jsx)(a.a.Item,{children:Object(i.jsx)(n.a,{className:c.a.subbmit,loading:r,type:"primary",size:"large",htmlType:"submit",children:t})})}},147:function(e,t,r){e.exports={subbmit:"subbmit--32umS"}},154:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return b}));var a=r(137),n=r.n(a),s=(r(138),r(122)),c=r(139),i=r(108),o=r(103);function l(e){return i.a.post("".concat(o.a,"/user/getCaptcha"),{data:e})}function u(e){return i.a.post("".concat(o.a,"/user/register"),{data:e})}function j(e){return i.a.post("".concat(o.a,"/user/login"),{data:e})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(n.a.mark((function t(){var r,a,c,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:r=t.sent,a=r.data,c=a.code,i=a.message,20020===c?s.b.success(i):s.b.error(i);case 5:case"end":return t.stop()}}),t)})))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(n.a.mark((function t(){var r,a,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e);case 2:r=t.sent,a=r.code,c=r.message,20023===a?s.b.success(c).then(window.location.href="/login"):s.b.error(c);case 5:case"end":return t.stop()}}),t)})))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(n.a.mark((function t(){var r,a,c,i,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:r=t.sent,a=r.code,c=r.message,i=r.data,o=(void 0===i?{}:i).token,0===a?s.b.success(c).then(window.localStorage.setItem("person-app-token",o),window.location.href="/"):s.b.error(c);case 6:case"end":return t.stop()}}),t)})))}},323:function(e,t,r){e.exports={registerContainer:"registerContainer--SCqFQ",register:"register--1Jc2V",icons:"icons--1mr7V",link:"link--3xRZK"}},331:function(e,t,r){"use strict";r.r(t);r(90);var a=r(92),n=(r(100),r(102)),s=(r(127),r(153)),c=(r(321),r(324)),i=(r(94),r(96)),o=r(98),l=r(0),u=r(20),j=r(142),d=r(343),p=r(344),b=r(345),f=r(146),m=r(33),h=r(154),O=r(323),x=r.n(O),g=r(3),v={ok:"success",pass:"normal",poor:"exception"},w={ok:Object(g.jsx)("div",{className:x.a.success,children:"\u5f3a\u5ea6\uff1a\u5f3a"}),pass:Object(g.jsx)("div",{className:x.a.normal,children:"\u5f3a\u5ea6\uff1a\u4e2d"}),poor:Object(g.jsx)("div",{className:x.a.exception,children:"\u5f3a\u5ea6\uff1a\u5f31"})};t.default=function(){var e=i.a.useForm(),t=Object(o.a)(e,1)[0],r=Object(l.useState)(!1),O=Object(o.a)(r,2),y=O[0],k=O[1],I=Object(l.useState)(!1),S=Object(o.a)(I,2),C=S[0],z=S[1],q=Object(l.useState)(!1),F=Object(o.a)(q,2),N=F[0],V=F[1],E=Object(m.b)();return Object(g.jsx)("div",{className:x.a.registerContainer,children:Object(g.jsx)("div",{className:x.a.register,children:Object(g.jsxs)(i.a,{form:t,onFinish:function(e){V(!0);var t=e.username,r=e.password,a=e.email,n=e.captcha;E(Object(h.c)({username:t,password:r,email:a,captcha:n})).then(V(!1))},initialValues:{prefix:"86"},children:[Object(g.jsx)(j.a,{name:"username",prefix:Object(g.jsx)(d.a,{style:{color:"#1890ff"}}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",size:"large",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"}]}),Object(g.jsx)(j.a,{name:"email",prefix:Object(g.jsx)(p.a,{style:{color:"#1890ff"}}),placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",size:"large",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"}]}),Object(g.jsx)(s.a,{content:function(){var e=t.getFieldValue("password"),r=function(){var e=t.getFieldValue("password");if(e)return e.length>9?"ok":e.length>5?"pass":"poor"}();return e&&e.length&&Object(g.jsxs)("div",{children:[w[r],Object(g.jsx)(c.a,{status:v[r],strokeWidth:6,percent:10*e.length>100?100:10*e.length,showInfo:!1})]})},overlayStyle:{width:240},visible:y,placement:"right",children:Object(g.jsx)(j.a,{name:"password",type:"password",autoComplete:"off",prefix:Object(g.jsx)(b.a,{style:{color:"#1890ff"}}),placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",size:"large",rules:[{validator:function(e,t){var r=Promise;return t?(y||k(!!t),z(!C),r.resolve()):(k(!!t),r.reject("\u8bf7\u8f93\u5165\u5bc6\u7801"))}}]})}),Object(g.jsx)(j.a,{name:"confirm",type:"password",prefix:Object(g.jsx)(b.a,{style:{color:"#1890ff"}}),placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",size:"large",rules:[{validator:function(e,r){var a=Promise;return r?r&&r!==t.getFieldValue("password")?a.reject("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4"):a.resolve():a.reject("\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")}}]}),Object(g.jsx)(j.a,{name:"mobile",type:"mobile",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",size:"large",rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^\d{11}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"}]}),Object(g.jsx)(j.a,{name:"captcha",prefix:Object(g.jsx)(p.a,{style:{color:"#1890ff"}}),placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",size:"large",onClick:function(){t.validateFields(["username","email","password"]).then((function(){E(Object(h.a)(t.getFieldsValue(["username","email","password"])))}))},rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]}),Object(g.jsxs)(a.a,{justify:"space-between",children:[Object(g.jsx)(n.a,{span:12,children:Object(g.jsx)(f.a,{loading:N,children:"\u6ce8\u518c"})}),Object(g.jsx)(n.a,{span:6,style:{lineHeight:"40px"},children:Object(g.jsx)(u.b,{to:"/login",className:x.a.link,children:"\u5df2\u6709\u8d26\u53f7\u767b\u9646"})})]})]})})})}}}]);
//# sourceMappingURL=9.83d884df.chunk.js.map